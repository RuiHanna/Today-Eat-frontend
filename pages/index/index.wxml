<!--index.wxml-->
<view class="home-container">

  <!-- é¡¶éƒ¨æ¨èå¡ç‰‡ -->
  <view wx:if="{{recommend}}">
    <view class="recommend-card" bindtap="goToDetail">
      <view class="left-img-wrapper">
        <image class="dish-img" src="{{recommend.image}}" mode="aspectFill" />
      </view>

      <view class="dish-info">
        <view class="dish-name">{{recommend.name}}</view>
        <view class="dish-reason">{{recommend.reason}}</view>
        <view class="dish-price">ï¿¥{{recommend.priceMin}} - {{recommend.priceMax}}</view>
      </view>
    </view>

    <!-- å¡ç‰‡ä¸‹æ–¹æŒ‰é’®åŒºåŸŸ -->
    <view class="recommend-actions">
      <button class="like-btn {{recommend.liked ? 'liked' : ''}}" bindtap="toggleLike">
        {{recommend.liked ? 'â¤ï¸' : 'ğŸ¤'}} å–œæ¬¢
      </button>
      <button class="search-btn" bindtap="searchInMeituan">å»ç¾å›¢çœ‹çœ‹</button>
    </view>
  </view>


  <!-- ç­›é€‰åŒºåŸŸ -->
  <view class="filter-section">
    <!-- ç¬¬ä¸€è¡Œï¼šå£å‘³ + è·ç¦» -->
    <view class="filter-grid">
      <picker mode="selector" range="{{tasteOptions}}" bindchange="onTasteChange">
        <view class="filter-item">å£å‘³ï¼š{{filters.taste}}</view>
      </picker>
      <picker mode="selector" range="{{distanceOptions}}" bindchange="onDistanceChange">
        <view class="filter-item">è·ç¦»ï¼š{{filters.distance}}</view>
      </picker>
    </view>

    <!-- ç¬¬äºŒè¡Œï¼šå¿ƒæƒ… + å¤©æ°” -->
    <view class="filter-grid">
      <picker mode="selector" range="{{moodOptions}}" bindchange="onMoodChange">
        <view class="filter-item">å¿ƒæƒ…ï¼š{{filters.mood}}</view>
      </picker>
      <picker mode="selector" range="{{weatherOptions}}" bindchange="onWeatherChange">
        <view class="filter-item">å¤©æ°”ï¼š{{filters.weather}}</view>
      </picker>
    </view>

    <!-- ç¬¬ä¸‰è¡Œï¼šé¢„ç®—æ»‘å— -->
    <view class="slider-wrapper">
      <view class="slider-label">é¢„ç®—ï¼šâ‰¤ ï¿¥{{filters.budget}}</view>
      <slider min="10" max="100" step="10" value="{{filters.budget}}" bindchange="onBudgetSlide" />
    </view>

    <!-- ç¬¬å››è¡Œï¼šå®šåˆ¶æ¨è -->
    <view class="refresh-wrapper">
      <button class="refresh-btn" bindtap="refreshRecommend">å®šåˆ¶æ¨è</button>
    </view>
  </view>

  <!-- åº•éƒ¨æ¨è -->
  <view class="bottom-section">
    <view class="bottom-subsection">
      <view class="section-title">ä½ å¯èƒ½è¿˜å–œæ¬¢</view>
      <block wx:for="{{guessList}}" wx:key="index">
        <view class="flat-item">
          <image class="flat-thumb" src="{{item.image}}" />
          <view class="flat-text">{{item.name}}</view>
        </view>
      </block>
    </view>

    <view class="bottom-subsection">
      <view class="section-title">è¿‘æœŸæ¨è</view>
      <block wx:for="{{historyList}}" wx:key="index">
        <view class="flat-item">
          <image class="flat-thumb" src="{{item.image}}" />
          <view class="flat-text">{{item.name}}</view>
        </view>
      </block>
    </view>
  </view>


</view>